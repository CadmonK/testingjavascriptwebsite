<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dodge Game</title>
  <style>
    body { text-align: center; font-family: sans-serif; background: #111; color: white; }
    canvas { background: #222; display: block; margin: 20px auto; }
  </style>
</head>
<body>
  <h1>Dodge the Blocks!</h1>
  <p>Use ⬅️ and ➡️ to move. Press SPACE to restart after dying.</p>
  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let player = { x: 180, y: 360, width: 40, height: 40, speed: 5 };
    let blocks = [];
    let blockSpeed = 2;
    let score = 0;
    let gameOver = false;

    function spawnBlock() {
      let x = Math.random() * (canvas.width - 30);
      blocks.push({ x: x, y: -20, width: 30, height: 30 });
    }

    function update() {
      if (gameOver) return;

      // move player
      document.onkeydown = e => {
        if (e.key === "ArrowLeft") player.x -= player.speed;
        if (e.key === "ArrowRight") player.x += player.speed;
      };

      // keep player inside canvas
      if (player.x < 0) player.x = 0;
      if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;

      // move blocks
      blocks.forEach(b => b.y += blockSpeed);

      // check collision
      blocks.forEach(b => {
        if (
          player.x < b.x + b.width &&
          player.x + player.width > b.x &&
          player.y < b.y + b.height &&
          player.y + player.height > b.y
        ) gameOver = true;
      });

      // remove blocks off screen
      blocks = blocks.filter(b => b.y < canvas.height);

      // increase score
      score += 0.01;

      // randomly spawn new blocks
      if (Math.random() < 0.02) spawnBlock();
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // draw player
      ctx.fillStyle = "lime";
      ctx.fillRect(player.x, player.y, player.width, player.height);

      // draw blocks
      ctx.fillStyle = "red";
      blocks.forEach(b => ctx.fillRect(b.x, b.y, b.width, b.height));

      // draw score
      ctx.fillStyle = "white";
      ctx.font = "16px Arial";
      ctx.fillText("Score: " + Math.floor(score), 10, 20);

      if (gameOver) {
        ctx.fillStyle = "yellow";
        ctx.font = "30px Arial";
        ctx.fillText("GAME OVER", 100, 200);
      }
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    function restartGame() {
      gameOver = false;
      score = 0;
      blocks = [];
      player.x = 180;
      player.y = 360;
    }

    // listen for restart (Spacebar)
    document.addEventListener('keydown', e => {
      if (gameOver && e.key === " ") restartGame();
    });

    loop();
  </script>
</body>
</html>
